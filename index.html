<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courtside Liberia - Promoting Excellence in Liberian Basketball</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #0f1b3c 0%, #1a237e 100%);
            --secondary-gradient: linear-gradient(45deg, #2196F3, #1976D2);
            --accent-color: #FF6B35;
            --text-light: #ffffff;
            --text-dark: #333333;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-hover-bg: rgba(255, 255, 255, 0.15);
            --border-radius: 16px;
            --box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--primary-gradient);
            color: var(--text-light);
            line-height: 1.6;
        }
        /* Stage Indicators */
        .stage-indicator {
            display: inline-block;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .stage-completed {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }
        .stage-ongoing {
            background: linear-gradient(45deg, #FF9800, #F57C00);
            color: white;
            animation: pulse 2s infinite;
        }
        .stage-upcoming {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        /* Progress Timeline */
        .progress-timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 2rem 0;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            position: relative;
        }
        .progress-timeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 5%;
            right: 5%;
            height: 4px;
            background: linear-gradient(90deg, #4CAF50, #FF9800, #2196F3);
            border-radius: 2px;
            z-index: 1;
        }
        .timeline-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary-gradient);
            padding: 1rem;
            border-radius: 50%;
            z-index: 2;
            position: relative;
            min-width: 100px;
            text-align: center;
        }
        .timeline-icon {
            font-size: 1.5rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }
        .timeline-completed .timeline-icon {
            background: #4CAF50;
        }
        .timeline-active .timeline-icon {
            background: #FF9800;
            animation: pulse 2s infinite;
        }
        .timeline-upcoming .timeline-icon {
            background: rgba(255, 255, 255, 0.2);
        }
        /* Header & Navigation */
        .header {
            background: rgba(15, 27, 60, 0.95);
            backdrop-filter: blur(20px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 1rem 0;
            box-shadow: var(--box-shadow);
        }
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .logo {
            width: 50px;
            height: 50px;
            background: var(--secondary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        .logo:hover {
            transform: scale(1.1);
        }
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        .site-title {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ffffff, #64B5F6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }
        .nav-item a {
            color: var(--text-light);
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }
        .nav-item a:hover,
        .nav-item a.active {
            background: var(--card-bg);
            transform: translateY(-2px);
        }
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        .admin-btn {
            background: var(--secondary-gradient);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: none;
        }
        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }
        body.admin-mode .admin-btn {
            display: block;
        }
        /* Hero Section */
        .hero {
            margin-top: 80px;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.5)), 
                        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 600'%3E%3Crect fill='%23001122' width='1200' height='600'/%3E%3Ccircle cx='600' cy='300' r='80' fill='none' stroke='%23ffffff' stroke-width='2' opacity='0.1'/%3E%3Ccircle cx='600' cy='300' r='120' fill='none' stroke='%23FF6B35' stroke-width='3' opacity='0.3'/%3E%3Cpath d='M300,50 L300,550 M900,50 L900,550 M200,150 L1000,150 M200,450 L1000,450' stroke='%23ffffff' stroke-width='1' opacity='0.1'/%3E%3C/svg%3E");
            background-size: cover;
            background-position: center;
            text-align: center;
            padding: 4rem 0 6rem;
        }
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .hero h1 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ffffff, #FF6B35, #2196F3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        .cover-photo {
            max-width: 100%;
            width: 800px;
            height: 300px;
            margin: 2rem auto;
            border-radius: var(--border-radius);
            background: var(--card-bg);
            display: none;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }
        .cover-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--border-radius);
        }
        .cover-photo.show {
            display: flex;
        }
        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .section {
            padding: 3rem 0;
            display: none;
        }
        .section.active {
            display: block;
        }
        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 2px;
        }
        /* Grid Layouts */
        .grid {
            display: grid;
            gap: 2rem;
        }
        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }
        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        /* Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--border-radius);
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .card:hover {
            background: var(--card-hover-bg);
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .card-content {
            opacity: 0.9;
            line-height: 1.6;
        }
        /* Team Cards */
        .team-card {
            text-align: center;
        }
        .team-logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--text-dark);
            font-size: 1.5rem;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.2);
        }
        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        .team-logo-small {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--text-dark);
            font-size: 0.8rem;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
            margin-right: 0.5rem;
        }
        .team-logo-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        /* News Cards */
        .news-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .news-image {
            width: 100%;
            height: 200px;
            background: var(--card-hover-bg);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .news-meta {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }
        .news-excerpt {
            flex-grow: 1;
            margin-bottom: 1rem;
        }
        /* Match Cards */
        .match-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .match-header {
            background: white;
            color: var(--text-dark);
            padding: 1rem;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            margin: -1.5rem -1.5rem 1rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .team-vs {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin: 1rem 0;
        }
        .team-info {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            flex: 1;
        }
        .vs-divider {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--accent-color);
            padding: 0.5rem 1rem;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 25px;
        }
        .match-result {
            text-align: center;
            margin-top: 1rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
        }
        /* Tables */
        .table-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 2rem 0;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        .table th,
        .table td {
            padding: 1rem 0.8rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .table th {
            background: white;
            color: var(--text-dark);
            font-weight: bold;
        }
        .table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }
        /* Buttons */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem;
            font-size: 1rem;
            text-decoration: none;
        }
        .btn-primary {
            background: var(--secondary-gradient);
            color: white;
        }
        .btn-success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(45deg, #f44336, #d32f2f);
            color: white;
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary-gradient);
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .modal-close:hover {
            color: var(--accent-color);
        }
        /* Admin Panel */
        .admin-panel {
            background: rgba(0, 0, 0, 0.9);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: none;
        }
        .admin-panel.show {
            display: block;
        }
        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        .admin-tab {
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .admin-tab.active {
            background: var(--secondary-gradient);
            border-color: #2196F3;
        }
        .admin-content {
            display: none;
        }
        .admin-content.active {
            display: block;
        }
        /* Filters */
        .filter-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Status indicators */
        .status-win {
            color: #4CAF50;
        }
        .status-loss {
            color: #f44336;
        }
        .status-forfeit {
            color: #FF9800;
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background: rgba(15, 27, 60, 0.98);
                flex-direction: column;
                padding: 2rem;
                transition: left 0.3s ease;
            }
            .nav-menu.show {
                left: 0;
            }
            .mobile-menu-toggle {
                display: block;
            }
            .progress-timeline {
                flex-direction: column;
                gap: 1rem;
            }
            .progress-timeline::before {
                display: none;
            }
        }
        /* Loading States */
        .loading {
            text-align: center;
            padding: 2rem;
            opacity: 0.7;
        }
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Utility Classes */
        .text-center { text-align: center; }
        .hidden { display: none !important; }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        /* Image Upload Styling */
        .image-preview {
            width: 100%;
            max-width: 300px;
            height: 200px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1rem 0;
            background: rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .image-preview.has-image {
            border-style: solid;
            border-color: var(--accent-color);
        }
        /* Admin Access */
        .admin-access {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 2rem;
            border-radius: var(--border-radius);
            border: 2px solid var(--accent-color);
            display: none;
            z-index: 3000;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo-section">
                <div class="logo" id="main-logo" ondblclick="adminAccess()">
                    CL
                </div>
                <h2 class="site-title">Courtside Liberia</h2>
            </div>
            <nav>
                <ul class="nav-menu" id="nav-menu">
                    <li class="nav-item"><a href="#" class="nav-link active" data-section="home"><i class="fas fa-home"></i> Home</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" data-section="news"><i class="fas fa-newspaper"></i> News</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" data-section="divisions"><i class="fas fa-trophy"></i> Divisions</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" data-section="fixtures"><i class="fas fa-calendar-alt"></i> Fixtures</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" data-section="results"><i class="fas fa-clipboard-check"></i> Results</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <button class="admin-btn" onclick="toggleAdmin()">
                <i class="fas fa-cog"></i> Admin Panel
            </button>
        </div>
    </header>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Courtside Liberia</h1>
            <p class="hero-subtitle">Promoting Excellence in Liberian Basketball Association</p>
            <p>Dedicated to developing talent and bringing professional basketball to communities across Liberia</p>
            <div id="cover-photo" class="cover-photo">
                <img id="cover-image" src="" alt="Courtside Liberia Cover">
            </div>
        </div>
    </section>
    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="section-title">Welcome to Courtside Liberia! We Live For The Culture! 231</div>
            <!-- Progress Timeline for First Division -->
            <div class="progress-timeline">
                <div class="timeline-stage timeline-completed">
                    <div class="timeline-icon"><i class="fas fa-flag-checkered"></i></div>
                    <span class="stage-indicator stage-completed">Regular Season</span>
                    <small>Complete</small>
                </div>
                <div class="timeline-stage timeline-active">
                    <div class="timeline-icon"><i class="fas fa-trophy"></i></div>
                    <span class="stage-indicator stage-ongoing">Big Six</span>
                    <small>Starts Today 5:30 PM</small>
                </div>
                <div class="timeline-stage timeline-upcoming">
                    <div class="timeline-icon"><i class="fas fa-crown"></i></div>
                    <span class="stage-indicator stage-upcoming">Finals</span>
                    <small>Coming Soon</small>
                </div>
            </div>
            <!-- Division Cards with Status -->
            <div class="grid grid-3">
                <div class="card" onclick="showSection('divisions')">
                    <div class="card-title">
                        <i class="fas fa-users"></i>
                        Second Division
                    </div>
                    <div class="card-content">
                        Eighteen teams in two sub-divisions. Top teams advance to Super Six.
                        <div class="mt-1">
                            <span class="stage-indicator stage-ongoing">Season Ongoing</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Big Six Announcement -->
            <div class="card text-center mt-2">
                <div class="card-title">
                    <i class="fas fa-fire"></i>
                    First Division Big Six
                </div>
                <div class="card-content">
                    <h3>Big Six Round Robin Starts Today at 5:30 PM!</h3>
                    <p style="margin: 1rem 0;">Top 6 teams from regular season compete for Big Four playoff spots. Top 4 teams advance.</p>
                    <span class="stage-indicator stage-ongoing">Live Today</span>
                </div>
            </div>
            <!-- Latest News Preview -->
            <div id="home-news-preview">
                <h3 style="margin: 3rem 0 2rem; text-align: center;">Latest News</h3>
                <div id="home-news-grid" class="grid grid-3"></div>
            </div>
            <!-- Quick Stats -->
            <div style="margin-top: 3rem;">
                <h3 style="text-align: center; margin-bottom: 2rem;">League Statistics</h3>
                <div class="grid grid-4" id="quick-stats">
                    <div class="card text-center">
                        <div class="card-title">
                            <i class="fas fa-users"></i>
                            Total Teams
                        </div>
                        <div class="card-content">
                            <span id="total-teams" style="font-size: 2rem; font-weight: bold; color: var(--accent-color);">0</span>
                        </div>
                    </div>
                    <div class="card text-center">
                        <div class="card-title">
                            <i class="fas fa-gamepad"></i>
                            Games Played
                        </div>
                        <div class="card-content">
                            <span id="total-games" style="font-size: 2rem; font-weight: bold; color: var(--accent-color);">0</span>
                        </div>
                    </div>
                    <div class="card text-center">
                        <div class="card-title">
                            <i class="fas fa-calendar"></i>
                            Upcoming Matches
                        </div>
                        <div class="card-content">
                            <span id="total-fixtures" style="font-size: 2rem; font-weight: bold; color: var(--accent-color);">0</span>
                        </div>
                    </div>
                    <div class="card text-center">
                        <div class="card-title">
                            <i class="fas fa-trophy"></i>
                            Active Divisions
                        </div>
                        <div class="card-content">
                            <span id="total-divisions" style="font-size: 2rem; font-weight: bold; color: var(--accent-color);">5</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- News Section -->
        <section id="news" class="section">
            <div class="section-title">Latest News</div>
            <div id="news-grid" class="grid grid-3"></div>
        </section>
        <!-- Divisions Section -->
        <section id="divisions" class="section">
            <div class="section-title">League Divisions</div>
            <div class="grid grid-3">
                <div class="card" onclick="showDivisionDetails('first')">
                    <div class="card-title">
                        <i class="fas fa-medal"></i>
                        First Division
                    </div>
                    <div class="card-content">
                        Premier teams competing at the highest level of Liberian basketball
                        <div class="mt-1">
                            <span class="stage-indicator stage-completed">Regular Season Complete</span>
                            <span class="stage-indicator stage-ongoing">Big Six Active</span>
                        </div>
                    </div>
                </div>
                <div class="card" onclick="showDivisionDetails('second')">
                    <div class="card-title">
                        <i class="fas fa-medal"></i>
                        Second Division
                    </div>
                    <div class="card-content">
                        Rising teams seeking promotion to the premier division
                        <div class="mt-1">
                            <span class="stage-indicator stage-ongoing">Season Ongoing</span>
                        </div>
                    </div>
                </div>
                <div class="card" onclick="showDivisionDetails('female')">
                    <div class="card-title">
                        <i class="fas fa-female"></i>
                        Female Division
                    </div>
                    <div class="card-content">
                        Women's professional basketball league promoting female excellence
                        <div class="mt-1">
                            <span class="stage-indicator stage-ongoing">Season Ongoing</span>
                        </div>
                    </div>
                </div>
                <div class="card" onclick="showDivisionDetails('third-jj')">
                    <div class="card-title">
                        <i class="fas fa-medal"></i>
                        Third Division - JJ Roberts
                    </div>
                    <div class="card-content">
                        Development league - JJ Roberts Conference for emerging talent
                        <div class="mt-1">
                            <span class="stage-indicator stage-ongoing">Season Ongoing</span>
                        </div>
                    </div>
                </div>
                <div class="card" onclick="showDivisionDetails('third-ej')">
                    <div class="card-title">
                        <i class="fas fa-medal"></i>
                        Third Division - EJ Roye
                    </div>
                    <div class="card-content">
                        Development league - EJ Roye Conference for emerging talent
                        <div class="mt-1">
                            <span class="stage-indicator stage-ongoing">Season Ongoing</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Division Details Section -->
        <section id="division-details" class="section">
            <button class="btn btn-secondary mb-2" onclick="showSection('divisions')">
                <i class="fas fa-arrow-left"></i> Back to Divisions
            </button>
            <div id="division-title" class="section-title">Division Details</div>
            <!-- Playoff Progression Container -->
            <div id="playoff-progression" class="hidden">
                <!-- Regular Season Final Standings -->
                <div class="card mb-2">
                    <div class="card-title">
                        <i class="fas fa-chart-line"></i>
                        Regular Season Final Standings
                    </div>
                    <div id="regular-season-table"></div>
                </div>
                <!-- Current Playoff Stage -->
                <div class="card mb-2">
                    <div class="card-title">
                        <i class="fas fa-trophy"></i>
                        <span id="current-stage-title">Big Six Round Robin</span>
                        <span class="stage-indicator stage-ongoing">Active</span>
                    </div>
                    <div class="card-content">
                        <p id="current-stage-description">Top 6 teams compete in round robin format. Top 4 advance to Big Four playoffs.</p>
                        <div id="current-stage-table"></div>
                    </div>
                </div>
                <!-- Next Playoff Stage -->
                <div class="card mb-2">
                    <div class="card-title">
                        <i class="fas fa-fire"></i>
                        <span id="next-stage-title">Big Four Playoffs</span>
                        <span class="stage-indicator stage-upcoming">Upcoming</span>
                    </div>
                    <div class="card-content">
                        <p id="next-stage-description">Best of 3 or 5 series format. Top 2 teams advance to finals.</p>
                        <div id="next-stage-bracket">
                            <div class="text-center">
                                <p><em>Teams will be determined from Big Six results</em></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Finals Stage -->
                <div class="card mb-2">
                    <div class="card-title">
                        <i class="fas fa-crown"></i>
                        Championship Finals
                        <span class="stage-indicator stage-upcoming">Upcoming</span>
                    </div>
                    <div class="card-content">
                        <p>Best of 3 or 5 series to determine the division champion.</p>
                        <div class="text-center">
                            <p><em>Finalists will be determined from Big Four playoffs</em></p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Regular Teams Display -->
            <div id="division-teams" class="grid grid-4"></div>
            <button id="standings-btn" class="btn btn-primary mt-2">
                <i class="fas fa-chart-line"></i> View Standings
            </button>
        </section>
        <!-- Fixtures Section -->
        <section id="fixtures" class="section">
            <div class="section-title">Upcoming Fixtures</div>
            <div class="filter-section">
                <div class="form-group">
                    <label class="form-label">Filter by Division</label>
                    <select id="fixtures-division-filter" class="form-select" onchange="filterFixtures()">
                        <option value="all">All Divisions</option>
                        <option value="first">First Division</option>
                        <option value="second">Second Division</option>
                        <option value="female">Female Division</option>
                        <option value="third-jj">Third Division - JJ Roberts</option>
                        <option value="third-ej">Third Division - EJ Roye</option>
                    </select>
                </div>
            </div>
            <div id="fixtures-list"></div>
        </section>
        <!-- Results Section -->
        <section id="results" class="section">
            <div class="section-title">Match Results</div>
            <div class="filter-section">
                <div class="form-group">
                    <label class="form-label">Filter by Division</label>
                    <select id="results-division-filter" class="form-select" onchange="filterResults()">
                        <option value="all">All Divisions</option>
                        <option value="first">First Division</option>
                        <option value="second">Second Division</option>
                        <option value="female">Female Division</option>
                        <option value="third-jj">Third Division - JJ Roberts</option>
                        <option value="third-ej">Third Division - EJ Roye</option>
                    </select>
                </div>
            </div>
            <div id="results-list"></div>
        </section>
        <!-- Admin Panel -->
        <div id="admin-panel" class="admin-panel">
            <h2 class="section-title">Admin Panel</h2>
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="showAdminTab('news')">
                    <i class="fas fa-newspaper"></i> Manage News
                </button>
                <button class="admin-tab" onclick="showAdminTab('teams')">
                    <i class="fas fa-users"></i> Manage Teams
                </button>
                <button class="admin-tab" onclick="showAdminTab('fixtures')">
                    <i class="fas fa-calendar-plus"></i> Add Fixtures
                </button>
                <button class="admin-tab" onclick="showAdminTab('matches')">
                    <i class="fas fa-trophy"></i> Add Results
                </button>
                <button class="admin-tab" onclick="showAdminTab('results')">
                    <i class="fas fa-clipboard-list"></i> Manage Results
                </button>
                <button class="admin-tab" onclick="showAdminTab('settings')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
            <!-- News Management -->
            <div id="admin-news" class="admin-content active">
                <h3><i class="fas fa-newspaper"></i> News Management</h3>
                <div class="grid grid-2 mb-2">
                    <div class="card">
                        <h4>Add New Article</h4>
                        <form id="news-form">
                            <div class="form-group">
                                <label class="form-label">Article Title</label>
                                <input type="text" id="news-title" class="form-input" placeholder="Enter article title">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Article Content</label>
                                <textarea id="news-content" class="form-textarea" placeholder="Enter article content"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Article Image (Base64)</label>
                                <input type="file" id="news-image" class="form-input" accept="image/*" onchange="handleImageUpload('news-image', 'news-preview')">
                                <div id="news-preview" class="image-preview">
                                    <span>Select an image</span>
                                </div>
                            </div>
                            <button type="button" class="btn btn-success" onclick="addNews()">
                                <i class="fas fa-plus"></i> Add Article
                            </button>
                        </form>
                    </div>
                </div>
                <div id="admin-news-list"></div>
            </div>
            <!-- Teams Management -->
            <div id="admin-teams" class="admin-content">
                <h3><i class="fas fa-users"></i> Team Management</h3>
                <div class="grid grid-2 mb-2">
                    <div class="card">
                        <h4>Add New Team</h4>
                        <div class="form-group">
                            <label class="form-label">Division</label>
                            <select id="team-division" class="form-select">
                                <option value="first">First Division</option>
                                <option value="second">Second Division</option>
                                <option value="female">Female Division</option>
                                <option value="third-jj">Third Division - JJ Roberts</option>
                                <option value="third-ej">Third Division - EJ Roye</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Team Name</label>
                            <input type="text" id="team-name" class="form-input" placeholder="Enter team name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Team Logo (Base64)</label>
                            <input type="file" id="team-logo" class="form-input" accept="image/*" onchange="handleImageUpload('team-logo', 'team-logo-preview')">
                            <div id="team-logo-preview" class="image-preview">
                                <span>Select team logo</span>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="addTeam()">
                            <i class="fas fa-plus"></i> Add Team
                        </button>
                    </div>
                </div>
                <div id="admin-teams-list"></div>
            </div>
            <!-- Fixtures Management -->
            <div id="admin-fixtures" class="admin-content">
                <h3><i class="fas fa-calendar-plus"></i> Add Fixture</h3>
                <div class="grid grid-2 mb-2">
                    <div class="card">
                        <div class="form-group">
                            <label class="form-label">Division</label>
                            <select id="fixture-division" class="form-select" onchange="updateFixtureTeams()">
                                <option value="first">First Division</option>
                                <option value="second">Second Division</option>
                                <option value="female">Female Division</option>
                                <option value="third-jj">Third Division - JJ Roberts</option>
                                <option value="third-ej">Third Division - EJ Roye</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Home Team</label>
                            <select id="fixture-home-team" class="form-select"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Away Team</label>
                            <select id="fixture-away-team" class="form-select"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Match Date</label>
                            <input type="date" id="fixture-date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Match Time</label>
                            <input type="time" id="fixture-time" class="form-input">
                        </div>
                        <button class="btn btn-success" onclick="addFixture()">
                            <i class="fas fa-plus"></i> Add Fixture
                        </button>
                    </div>
                </div>
                <div id="admin-fixtures-list"></div>
            </div>
            <!-- Match Results Management -->
            <div id="admin-matches" class="admin-content">
                <h3><i class="fas fa-trophy"></i> Add Match Result</h3>
                <div class="grid grid-2 mb-2">
                    <div class="card">
                        <div class="form-group">
                            <label class="form-label">Division</label>
                            <select id="match-division" class="form-select" onchange="updateMatchTeams()">
                                <option value="first">First Division</option>
                                <option value="second">Second Division</option>
                                <option value="female">Female Division</option>
                                <option value="third-jj">Third Division - JJ Roberts</option>
                                <option value="third-ej">Third Division - EJ Roye</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Home Team</label>
                            <select id="match-home-team" class="form-select"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Away Team</label>
                            <select id="match-away-team" class="form-select"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Match Date</label>
                            <input type="date" id="match-date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Result Type</label>
                            <select id="match-result-type" class="form-select" onchange="toggleMatchInputs()">
                                <option value="normal">Normal Game</option>
                                <option value="forfeit">Forfeit</option>
                            </select>
                        </div>
                        <div id="match-normal-inputs">
                            <div class="form-group">
                                <label class="form-label">Home Score</label>
                                <input type="number" id="match-home-score" class="form-input" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Away Score</label>
                                <input type="number" id="match-away-score" class="form-input" min="0">
                            </div>
                        </div>
                        <div id="match-forfeit-inputs" class="hidden">
                            <div class="form-group">
                                <label class="form-label">Team that Forfeited</label>
                                <select id="match-forfeit-team" class="form-select">
                                    <option value="home">Home Team</option>
                                    <option value="away">Away Team</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-success" onclick="addMatchResult()">
                            <i class="fas fa-plus"></i> Add Result
                        </button>
                    </div>
                </div>
            </div>
            <!-- Results Management -->
            <div id="admin-results" class="admin-content">
                <h3><i class="fas fa-clipboard-list"></i> Results Management</h3>
                <div class="filter-section">
                    <div class="form-group">
                        <label class="form-label">Filter by Division</label>
                        <select id="admin-results-division-filter" class="form-select" onchange="renderAdminResults()">
                            <option value="all">All Divisions</option>
                            <option value="first">First Division</option>
                            <option value="second">Second Division</option>
                            <option value="female">Female Division</option>
                            <option value="third-jj">Third Division - JJ Roberts</option>
                            <option value="third-ej">Third Division - EJ Roye</option>
                    </select>
                    </div>
                </div>
                <div id="admin-results-list"></div>
            </div>
            <!-- Settings Management -->
            <div id="admin-settings" class="admin-content">
                <h3><i class="fas fa-cog"></i> Website Settings</h3>
                <div class="grid grid-2">
                    <div class="card">
                        <h4>Main Logo</h4>
                        <div class="form-group">
                            <label class="form-label">Upload Main Logo (Base64)</label>
                            <input type="file" id="main-logo-upload" class="form-input" accept="image/*" onchange="handleImageUpload('main-logo-upload', 'main-logo-preview')">
                            <div id="main-logo-preview" class="image-preview">
                                <span>Select main logo</span>
                            </div>
                            <button class="btn btn-primary" onclick="uploadMainLogo()">
                                <i class="fas fa-upload"></i> Update Logo
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <h4>Cover Photo</h4>
                        <div class="form-group">
                            <label class="form-label">Upload Cover Photo (Base64)</label>
                            <input type="file" id="cover-photo-upload" class="form-input" accept="image/*" onchange="handleImageUpload('cover-photo-upload', 'cover-photo-preview')">
                            <div id="cover-photo-preview" class="image-preview">
                                <span>Select cover photo</span>
                            </div>
                            <button class="btn btn-primary" onclick="uploadCoverPhoto()">
                                <i class="fas fa-upload"></i> Update Cover
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Modals -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modal-body"></div>
        </div>
    </div>
    <!-- Admin Access -->
    <div id="admin-access" class="admin-access">
        <h3><i class="fas fa-lock"></i> Admin Access</h3>
        <p>Double-click the logo 5 times to access admin panel</p>
        <p id="click-counter">Clicks: 0/5</p>
    </div>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAlwLvdfEVwDatmIcmdjdAu-0t0ALY6XIc",
            authDomain: "courtside-liberia-52aa8.firebaseapp.com",
            databaseURL: "https://courtside-liberia-52aa8-default-rtdb.firebaseio.com",
            projectId: "courtside-liberia-52aa8",
            storageBucket: "courtside-liberia-52aa8.firebasestorage.app",
            messagingSenderId: "154829379760",
            appId: "1:154829379760:web:000df31f9245329d990375",
            measurementId: "G-QPJHY0QLE8"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        // Global Data Storage
        let appData = {
            teams: {
                first: [],
                second: [],
                female: [],
                'third-jj': [],
                'third-ej': []
            },
            fixtures: [],
            results: [],
            news: [],
            settings: {
                mainLogo: null,
                coverPhoto: null,
                teamLogos: {}
            }
        };
        let adminClickCount = 0;
        let currentImageData = {};
        // Initialization
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
        });
        function initializeApp() {
            loadAllData();
            showSection('home');
        }
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    showSection(this.dataset.section);
                });
            });
            // Mobile menu
            document.getElementById('mobile-menu-toggle').addEventListener('click', function() {
                document.getElementById('nav-menu').classList.toggle('show');
            });
            // Close mobile menu when clicking on a link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function() {
                    document.getElementById('nav-menu').classList.remove('show');
                });
            });
            // Modal close
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('modal');
                if (event.target === modal) {
                    closeModal();
                }
            });
        }
        // Navigation Functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            // Show target section
            document.getElementById(sectionName).classList.add('active');
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            const targetLink = document.querySelector(`[data-section="${sectionName}"]`);
            if (targetLink) targetLink.classList.add('active');
            // Load section-specific data
            switch(sectionName) {
                case 'home':
                    loadHomeData();
                    break;
                case 'news':
                    renderNews();
                    break;
                case 'fixtures':
                    renderFixtures();
                    break;
                case 'results':
                    renderResults();
                    break;
            }
        }
        function showDivisionDetails(division) {
            document.getElementById('division-title').innerHTML = `<i class="fas fa-trophy"></i> ${getDivisionName(division)}`;
            // Show playoff progression for First Division (regular season complete)
            if (division === 'first') {
                showPlayoffProgression(division);
            } else {
                hidePlayoffProgression();
                renderDivisionTeams(division);
            }
            const standingsBtn = document.getElementById('standings-btn');
            standingsBtn.onclick = function() { showDivisionStandings(division); };
            showSection('division-details');
        }
        function showPlayoffProgression(division) {
            document.getElementById('playoff-progression').classList.remove('hidden');
            document.getElementById('division-teams').classList.add('hidden');
            document.getElementById('standings-btn').classList.add('hidden');
            // Load and display regular season final standings
            loadRegularSeasonStandings(division);
            // Update stage info based on division
            updatePlayoffStageInfo(division);
        }
        function hidePlayoffProgression() {
            document.getElementById('playoff-progression').classList.add('hidden');
            document.getElementById('division-teams').classList.remove('hidden');
            document.getElementById('standings-btn').classList.remove('hidden');
        }
        function updatePlayoffStageInfo(division) {
            const currentStageTitle = document.getElementById('current-stage-title');
            const currentStageDescription = document.getElementById('current-stage-description');
            const nextStageTitle = document.getElementById('next-stage-title');
            const nextStageDescription = document.getElementById('next-stage-description');
            if (division === 'first') {
                currentStageTitle.textContent = 'Big Six Round Robin';
                currentStageDescription.textContent = 'Top 6 teams from regular season compete in round robin format. Top 4 teams advance to Big Four playoffs.';
                nextStageTitle.textContent = 'Big Four Playoffs';
                nextStageDescription.textContent = 'Best of 3 or 5 series format. Top 2 teams advance to championship finals.';
            }
        }
        function loadRegularSeasonStandings(division) {
            const teams = appData.teams[division] || [];
            const divisionResults = appData.results.filter(r => r.division === division && r.played);
            // Calculate final standings
            const standings = teams.map(team => {
                const teamName = team.name;
                const teamResults = divisionResults.filter(result => 
                    result.homeTeam === teamName || result.awayTeam === teamName
                );
                let wins = 0, losses = 0, forfeits = 0, pointsFor = 0, pointsAgainst = 0;
                teamResults.forEach(result => {
                    const isHome = result.homeTeam === teamName;
                    const teamScore = isHome ? result.homeScore : result.awayScore;
                    const opponentScore = isHome ? result.awayScore : result.homeScore;
                    pointsFor += teamScore;
                    pointsAgainst += opponentScore;
                    if (result.forfeit) {
                        if ((isHome && result.forfeitTeam === 'home') || (!isHome && result.forfeitTeam === 'away')) {
                            forfeits++;
                        } else {
                            wins++;
                        }
                    } else {
                        if (teamScore > opponentScore) {
                            wins++;
                        } else {
                            losses++;
                        }
                    }
                });
                const totalPoints = (wins * 2) + (losses * 1) + (forfeits * 0);
                return {
                    team: teamName,
                    played: teamResults.length,
                    wins,
                    losses,
                    forfeits,
                    pointsFor,
                    pointsAgainst,
                    pointsDiff: pointsFor - pointsAgainst,
                    points: totalPoints
                };
            });
            // Sort standings
            standings.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                if (b.pointsDiff !== a.pointsDiff) return b.pointsDiff - a.pointsDiff;
                return b.pointsFor - a.pointsFor;
            });
            // Display regular season table
            displayRegularSeasonTable(standings, division);
            // Display current playoff stage teams if (division === 'first') {
            if (division === 'first') {
                displayBigSixTable(standings.slice(0, 6));
            }
        }
        function displayRegularSeasonTable(standings, division) {
            const container = document.getElementById('regular-season-table');
            let html = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Pos</th>
                                <th>Team</th>
                                <th>P</th>
                                <th>W</th>
                                <th>L</th>
                                <th>F</th>
                                <th>PF</th>
                                <th>PA</th>
                                <th>PD</th>
                                <th>Pts</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            standings.forEach((team, index) => {
                let statusBadge = '';
                if (division === 'first') {
                    if (index < 6) {
                        statusBadge = '<span class="stage-indicator stage-ongoing">Big Six</span>';
                    } else {
                        statusBadge = '<span style="opacity: 0.5;">Eliminated</span>';
                    }
                }
                html += `
                    <tr style="cursor: pointer;" onclick="showTeamDetails('${division}', '${team.team}')">
                        <td><strong>${index + 1}</strong></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                ${getTeamLogo(division, team.team)}
                                <span>${team.team}</span>
                            </div>
                        </td>
                        <td>${team.played}</td>
                        <td class="status-win">${team.wins}</td>
                        <td class="status-loss">${team.losses}</td>
                        <td class="status-forfeit">${team.forfeits}</td>
                        <td>${team.pointsFor}</td>
                        <td>${team.pointsAgainst}</td>
                        <td class="${team.pointsDiff >= 0 ? 'status-win' : 'status-loss'}">${team.pointsDiff >= 0 ? '+' : ''}${team.pointsDiff}</td>
                        <td style="font-weight: bold; color: var(--accent-color);">${team.points}</td>
                        <td>${statusBadge}</td>
                    </tr>
                `;
            });
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            container.innerHTML = html;
        }
        function displayBigSixTable(bigSixTeams) {
            const container = document.getElementById('current-stage-table');
            let html = `
                <h4 style="margin-bottom: 1rem;">Big Six Qualified Teams</h4>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Seed</th>
                                <th>Team</th>
                                <th>Regular Season</th>
                                <th>Big Six Record</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            bigSixTeams.forEach((team, index) => {
                html += `
                    <tr>
                        <td><strong>${index + 1}</strong></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                ${getTeamLogo('first', team.team)}
                                <span>${team.team}</span>
                            </div>
                        </td>
                        <td>${team.wins}-${team.losses}-${team.forfeits}</td>
                        <td><em>TBD</em></td>
                        <td><span class="stage-indicator stage-ongoing">Big Six</span></td>
                    </tr>
                `;
            });
            html += `
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-1">
                    <p><strong>Big Six Round Robin starts today at 5:30 PM</strong></p>
                    <p><em>Top 4 teams will advance to Big Four Playoffs</em></p>
                </div>
            `;
            container.innerHTML = html;
        }
        // Data Loading Functions
        function loadAllData() {
            loadTeams();
            loadFixtures();
            loadResults();
            loadNews();
            loadSettings();
        }
        function loadTeams() {
            db.collection("teams").onSnapshot((snapshot) => {
                Object.keys(appData.teams).forEach(division => {
                    appData.teams[division] = [];
                });
                snapshot.forEach((doc) => {
                    const team = { id: doc.id, ...doc.data() };
                    if (appData.teams[team.division]) {
                        appData.teams[team.division].push(team);
                        if (team.logo) {
                            appData.settings.teamLogos[`${team.division}-${team.name}`] = team.logo;
                        }
                    }
                });
                renderAdminTeams();
                updateTeamSelects();
                updateQuickStats();
            });
        }
        function loadFixtures() {
            db.collection("fixtures").where("played", "==", false).onSnapshot((snapshot) => {
                appData.fixtures = [];
                snapshot.forEach((doc) => {
                    appData.fixtures.push({ id: doc.id, ...doc.data() });
                });
                renderFixtures();
                renderAdminFixtures();
                updateQuickStats();
            });
        }
        function loadResults() {
            db.collection("fixtures")
                .where("played", "==", true)
                .onSnapshot((snapshot) => {
                    appData.results = [];
                    snapshot.forEach((doc) => {
                        appData.results.push({ id: doc.id, ...doc.data() });
                    });
                    appData.results.sort((a, b) => new Date(b.date) - new Date(a.date));
                    renderResults();
                    renderAdminResults();
                    updateQuickStats();
                });
        }
        function loadNews() {
            db.collection("news").orderBy("timestamp", "desc").onSnapshot((snapshot) => {
                appData.news = [];
                snapshot.forEach((doc) => {
                    appData.news.push({ id: doc.id, ...doc.data() });
                });
                renderNews();
                renderAdminNews();
                loadHomeData();
            });
        }
        function loadSettings() {
            db.collection("settings").doc("mainLogo").get().then((doc) => {
                if (doc.exists && doc.data().data) {
                    appData.settings.mainLogo = doc.data().data;
                    updateMainLogo(doc.data().data);
                }
            });
            db.collection("settings").doc("coverPhoto").get().then((doc) => {
                if (doc.exists && doc.data().data) {
                    appData.settings.coverPhoto = doc.data().data;
                    updateCoverPhoto(doc.data().data);
                }
            });
        }
        // Image Handling
        function handleImageUpload(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const file = input.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    input.value = '';
                    return;
                }
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64Data = e.target.result;
                    currentImageData[inputId] = base64Data;
                    preview.innerHTML = `<img src="${base64Data}" alt="Preview">`;
                    preview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        }
        function updateMainLogo(base64Data) {
            const logoElement = document.getElementById('main-logo');
            logoElement.innerHTML = `<img src="${base64Data}" alt="Courtside Liberia">`;
        }
        function updateCoverPhoto(base64Data) {
            const coverPhoto = document.getElementById('cover-photo');
            const coverImage = document.getElementById('cover-image');
            coverImage.src = base64Data;
            coverPhoto.classList.add('show');
        }
        // News Functions
        async function addNews() {
            const title = document.getElementById('news-title').value.trim();
            const content = document.getElementById('news-content').value.trim();
            const imageData = currentImageData['news-image'];
            if (!title || !content) {
                alert('Please fill in title and content');
                return;
            }
            try {
                await db.collection("news").add({
                    title,
                    content,
                    image: imageData || null,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    date: new Date().toISOString().split('T')[0]
                });
                document.getElementById('news-title').value = '';
                document.getElementById('news-content').value = '';
                document.getElementById('news-image').value = '';
                document.getElementById('news-preview').innerHTML = '<span>Select an image</span>';
                document.getElementById('news-preview').classList.remove('has-image');
                delete currentImageData['news-image'];
                alert('News article added successfully!');
            } catch (error) {
                console.error("Error adding news:", error);
                alert('Error adding news article. Please try again.');
            }
        }
        async function removeNews(newsId) {
            if (!confirm('Are you sure you want to remove this news article?')) {
                return;
            }
            try {
                await db.collection("news").doc(newsId).delete();
                alert('News article removed successfully!');
            } catch (error) {
                console.error("Error removing news:", error);
                alert('Error removing news article. Please try again.');
            }
        }
        function renderNews() {
            const container = document.getElementById('news-grid');
            let html = '';
            if (appData.news.length === 0) {
                html = '<div class="loading"><div class="spinner"></div><p>Loading news...</p></div>';
            } else {
                appData.news.forEach(article => {
                    html += `
                        <div class="card news-card" onclick="showNewsDetails('${article.id}')">
                            <div class="news-image">
                                ${article.image ? `<img src="${article.image}" alt="${article.title}">` : '<i class="fas fa-newspaper" style="font-size: 3rem; opacity: 0.3;"></i>'}
                            </div>
                            <div class="news-meta">
                                <i class="fas fa-calendar-alt"></i> ${article.date || 'No date'}
                            </div>
                            <h3>${article.title}</h3>
                            <div class="news-excerpt">
                                ${article.content.substring(0, 150)}${article.content.length > 150 ? '...' : ''}
                            </div>
                            <div style="color: var(--accent-color); font-weight: bold;">
                                Read More <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        function renderAdminNews() {
            const container = document.getElementById('admin-news-list');
            let html = '<h4><i class="fas fa-list"></i> Published Articles:</h4>';
            if (appData.news.length === 0) {
                html += '<p style="text-align: center; opacity: 0.7;">No news articles yet.</p>';
            } else {
                appData.news.forEach(article => {
                    html += `
                        <div class="card" style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem;">
                                <div style="flex: 1;">
                                    <h4>${article.title}</h4>
                                    <p style="opacity: 0.7; margin: 0.5rem 0;">${article.date}</p>
                                    <p>${article.content.substring(0, 100)}${article.content.length > 100 ? '...' : ''}</p>
                                </div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="removeNews('${article.id}')">
                                        <i class="fas fa-trash"></i> Remove
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        function showNewsDetails(newsId) {
            const article = appData.news.find(n => n.id === newsId);
            if (!article) return;
            document.getElementById('modal-title').innerHTML = `<i class="fas fa-newspaper"></i> ${article.title}`;
            document.getElementById('modal-body').innerHTML = `
                <div style="margin-bottom: 1rem;">
                    ${article.image ? `<img src="${article.image}" alt="${article.title}" style="width: 100%; border-radius: var(--border-radius); margin-bottom: 1rem;">` : ''}
                    <p style="opacity: 0.7;"><i class="fas fa-calendar-alt"></i> ${article.date}</p>
                </div>
                <div style="line-height: 1.8; white-space: pre-line;">
                    ${article.content}
                </div>
            `;
            document.getElementById('modal').style.display = 'block';
        }
        // Team Functions
        async function addTeam() {
            const division = document.getElementById('team-division').value;
            const name = document.getElementById('team-name').value.trim();
            const logoData = currentImageData['team-logo'];
            if (!name) {
                alert('Please enter a team name');
                return;
            }
            const existingTeam = appData.teams[division].find(team => team.name === name);
            if (existingTeam) {
                alert('Team name already exists in this division');
                return;
            }
            try {
                await db.collection("teams").add({
                    division,
                    name,
                    logo: logoData || null,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                document.getElementById('team-name').value = '';
                document.getElementById('team-logo').value = '';
                document.getElementById('team-logo-preview').innerHTML = '<span>Select team logo</span>';
                document.getElementById('team-logo-preview').classList.remove('has-image');
                delete currentImageData['team-logo'];
                alert('Team added successfully!');
            } catch (error) {
                console.error("Error adding team:", error);
                alert('Error adding team. Please try again.');
            }
        }
        async function removeTeam(teamId) {
            if (!confirm('Are you sure you want to remove this team?')) {
                return;
            }
            try {
                await db.collection("teams").doc(teamId).delete();
                alert('Team removed successfully!');
            } catch (error) {
                console.error("Error removing team:", error);
                alert('Error removing team. Please try again.');
            }
        }
        function renderDivisionTeams(division) {
            const container = document.getElementById('division-teams');
            const teams = appData.teams[division] || [];
            let html = '';
            if (teams.length === 0) {
                html = '<div class="loading"><p>No teams in this division yet.</p></div>';
            } else {
                teams.forEach(team => {
                    const logoKey = `${division}-${team.name}`;
                    const logoSrc = appData.settings.teamLogos[logoKey];
                    html += `
                        <div class="card team-card" onclick="showTeamDetails('${division}', '${team.name}')">
                            <div class="team-logo">
                                ${logoSrc ? `<img src="${logoSrc}" alt="${team.name}">` : team.name.charAt(0)}
                            </div>
                            <h4>${team.name}</h4>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        function renderAdminTeams() {
            const container = document.getElementById('admin-teams-list');
            let html = '<h4><i class="fas fa-list"></i> Current Teams:</h4>';
            let hasTeams = false;
            Object.keys(appData.teams).forEach(division => {
                if (appData.teams[division].length > 0) {
                    hasTeams = true;
                    html += `<h5>${getDivisionName(division)}:</h5>`;
                    appData.teams[division].forEach(team => {
                        html += `
                            <div class="card" style="margin-bottom: 0.5rem;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div class="team-logo-small">
                                            ${team.logo ? `<img src="${team.logo}" alt="${team.name}">` : team.name.charAt(0)}
                                        </div>
                                        <span>${team.name}</span>
                                    </div>
                                    <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="removeTeam('${team.id}')">
                                        <i class="fas fa-trash"></i> Remove
                                    </button>
                                </div>
                            </div>
                        `;
                    });
                }
            });
            if (!hasTeams) {
                html += '<p style="text-align: center; opacity: 0.7;">No teams added yet.</p>';
            }
            container.innerHTML = html;
        }
        function updateTeamSelects() {
            updateFixtureTeams();
            updateMatchTeams();
        }
        function updateFixtureTeams() {
            const division = document.getElementById('fixture-division').value;
            const homeSelect = document.getElementById('fixture-home-team');
            const awaySelect = document.getElementById('fixture-away-team');
            homeSelect.innerHTML = '';
            awaySelect.innerHTML = '';
            const teams = appData.teams[division] || [];
            teams.forEach(team => {
                homeSelect.innerHTML += `<option value="${team.name}">${team.name}</option>`;
                awaySelect.innerHTML += `<option value="${team.name}">${team.name}</option>`;
            });
        }
        function updateMatchTeams() {
            const division = document.getElementById('match-division').value;
            const homeSelect = document.getElementById('match-home-team');
            const awaySelect = document.getElementById('match-away-team');
            homeSelect.innerHTML = '';
            awaySelect.innerHTML = '';
            const teams = appData.teams[division] || [];
            teams.forEach(team => {
                homeSelect.innerHTML += `<option value="${team.name}">${team.name}</option>`;
                awaySelect.innerHTML += `<option value="${team.name}">${team.name}</option>`;
            });
        }
        // Fixture Functions
        async function addFixture() {
            const division = document.getElementById('fixture-division').value;
            const homeTeam = document.getElementById('fixture-home-team').value;
            const awayTeam = document.getElementById('fixture-away-team').value;
            const date = document.getElementById('fixture-date').value;
            const time = document.getElementById('fixture-time').value;
            if (!homeTeam || !awayTeam || !date || !time) {
                alert('Please fill in all fields');
                return;
            }
            if (homeTeam === awayTeam) {
                alert('Home and Away teams cannot be the same!');
                return;
            }
            try {
                await db.collection("fixtures").add({
                    division,
                    homeTeam,
                    awayTeam,
                    date,
                    time,
                    played: false,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                document.getElementById('fixture-date').value = '';
                document.getElementById('fixture-time').value = '';
                alert("Fixture added successfully!");
            } catch (error) {
                console.error("Error adding fixture:", error);
                alert("Error adding fixture. Please try again.");
            }
        }
        async function removeFixture(fixtureId) {
            if (!confirm('Are you sure you want to remove this fixture?')) {
                return;
            }
            try {
                await db.collection("fixtures").doc(fixtureId).delete();
                alert("Fixture removed successfully!");
            } catch (error) {
                console.error("Error removing fixture:", error);
                alert("Error removing fixture. Please try again.");
            }
        }
        function filterFixtures() {
            const selectedDivision = document.getElementById('fixtures-division-filter').value;
            renderFixtures(selectedDivision);
        }
        function renderFixtures(filterDivision = 'all') {
            const container = document.getElementById('fixtures-list');
            let fixtures = appData.fixtures.filter(f => !f.played);
            if (filterDivision !== 'all') {
                fixtures = fixtures.filter(f => f.division === filterDivision);
            }
            fixtures = fixtures.sort((a, b) => new Date(a.date) - new Date(b.date));
            let html = '';
            if (fixtures.length === 0) {
                html = '<div class="loading"><p>No fixtures scheduled for this division.</p></div>';
            } else {
                fixtures.forEach(fixture => {
                    html += `
                        <div class="match-card">
                            <div class="match-header">
                                <span><i class="fas fa-medal"></i> ${getDivisionName(fixture.division)}</span>
                                <span><i class="fas fa-calendar-alt"></i> ${fixture.date} <i class="fas fa-clock"></i> ${fixture.time}</span>
                            </div>
                            <div class="team-vs">
                                <div class="team-info">
                                    ${getTeamLogo(fixture.division, fixture.homeTeam)}
                                    <strong>${fixture.homeTeam}</strong>
                                    <small style="opacity: 0.7;">(Home)</small>
                                </div>
                                <div class="vs-divider">VS</div>
                                <div class="team-info" style="text-align: right;">
                                    <small style="opacity: 0.7;">(Away)</small>
                                    <strong>${fixture.awayTeam}</strong>
                                    ${getTeamLogo(fixture.division, fixture.awayTeam)}
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        function renderAdminFixtures() {
            const container = document.getElementById('admin-fixtures-list');
            const upcomingFixtures = appData.fixtures.filter(f => !f.played).sort((a, b) => new Date(a.date) - new Date(b.date));
            let html = '<h4><i class="fas fa-calendar-alt"></i> Upcoming Fixtures:</h4>';
            if (upcomingFixtures.length === 0) {
                html += '<p style="text-align: center; opacity: 0.7;">No upcoming fixtures scheduled.</p>';
            } else {
                upcomingFixtures.forEach(fixture => {
                    html += `
                        <div class="card" style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong><i class="fas fa-medal"></i> ${getDivisionName(fixture.division)}</strong><br>
                                    <span>${fixture.homeTeam} vs ${fixture.awayTeam}</span><br>
                                    <small><i class="fas fa-calendar-alt"></i> ${fixture.date} <i class="fas fa-clock"></i> ${fixture.time}</small>
                                </div>
                                <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="removeFixture('${fixture.id}')">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        // Match Result Functions
        function toggleMatchInputs() {
            const resultType = document.getElementById('match-result-type').value;
            const normalInputs = document.getElementById('match-normal-inputs');
            const forfeitInputs = document.getElementById('match-forfeit-inputs');
            if (resultType === 'forfeit') {
                normalInputs.classList.add('hidden');
                forfeitInputs.classList.remove('hidden');
            } else {
                normalInputs.classList.remove('hidden');
                forfeitInputs.classList.add('hidden');
            }
        }
        async function addMatchResult() {
            const division = document.getElementById('match-division').value;
            const homeTeam = document.getElementById('match-home-team').value;
            const awayTeam = document.getElementById('match-away-team').value;
            const date = document.getElementById('match-date').value;
            const resultType = document.getElementById('match-result-type').value;
            if (!homeTeam || !awayTeam || !date) {
                alert('Please fill in all required fields');
                return;
            }
            let resultData = {
                division,
                homeTeam,
                awayTeam,
                date,
                played: true,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };
            if (resultType === 'normal') {
                const homeScore = parseInt(document.getElementById('match-home-score').value, 10);
                const awayScore = parseInt(document.getElementById('match-away-score').value, 10);
                if (isNaN(homeScore) || isNaN(awayScore)) {
                    alert("Please enter both scores");
                    return;
                }
                resultData.homeScore = homeScore;
                resultData.awayScore = awayScore;
            } else if (resultType === 'forfeit') {
                const forfeitTeam = document.getElementById('match-forfeit-team').value;
                resultData.forfeit = true;
                resultData.forfeitTeam = forfeitTeam;
                resultData.homeScore = forfeitTeam === "home" ? 0 : 20;
                resultData.awayScore = forfeitTeam === "away" ? 0 : 20;
            }
            try {
                const querySnapshot = await db.collection("fixtures")
                    .where("division", "==", division)
                    .where("homeTeam", "==", homeTeam)
                    .where("awayTeam", "==", awayTeam)
                    .where("date", "==", date)
                    .limit(1)
                    .get();
                if (!querySnapshot.empty) {
                    await db.collection("fixtures").doc(querySnapshot.docs[0].id).update(resultData);
                } else {
                    await db.collection("fixtures").add(resultData);
                }
                document.getElementById('match-home-score').value = '';
                document.getElementById('match-away-score').value = '';
                document.getElementById('match-date').value = '';
                alert("Match result recorded successfully!");
            } catch (error) {
                console.error("Error recording match result:", error);
                alert("Error recording match result. Please try again.");
            }
        }
        // Results Functions
        function filterResults() {
            const selectedDivision = document.getElementById('results-division-filter').value;
            renderResults(selectedDivision);
        }
        function renderResults(filterDivision = 'all') {
            const container = document.getElementById('results-list');
            let results = appData.results.filter(r => r.played);
            if (filterDivision !== 'all') {
                results = results.filter(r => r.division === filterDivision);
            }
            results = results.sort((a, b) => new Date(b.date) - new Date(a.date));
            let html = '';
            if (results.length === 0) {
                html = '<div class="loading"><p>No results available for this division.</p></div>';
            } else {
                results.forEach(result => {
                    let resultText, winnerText, winnerClass = '';
                    if (result.forfeit) {
                        const forfeitingTeam = result.forfeitTeam === 'home' ? result.homeTeam : result.awayTeam;
                        const winningTeam = result.forfeitTeam === 'home' ? result.awayTeam : result.homeTeam;
                        resultText = 'FORFEIT';
                        winnerText = `${forfeitingTeam} forfeited - Winner: ${winningTeam}`;
                        winnerClass = 'status-forfeit';
                    } else {
                        resultText = `${result.homeScore} - ${result.awayScore}`;
                        const winner = result.homeScore > result.awayScore ? result.homeTeam : 
                                      result.homeScore < result.awayScore ? result.awayTeam : null;
                        winnerText = winner ? `Winner: ${winner}` : 'Match ended in a tie';
                        winnerClass = winner ? 'status-win' : '';
                    }
                    html += `
                        <div class="match-card">
                            <div class="match-header">
                                <span><i class="fas fa-medal"></i> ${getDivisionName(result.division)}</span>
                                <span><i class="fas fa-calendar-alt"></i> ${result.date}</span>
                            </div>
                            <div class="team-vs">
                                <div class="team-info">
                                    ${getTeamLogo(result.division, result.homeTeam)}
                                    <strong>${result.homeTeam}</strong>
                                    <small style="opacity: 0.7;">(Home)</small>
                                </div>
                                <div class="vs-divider">${resultText}</div>
                                <div class="team-info" style="text-align: right;">
                                    <small style="opacity: 0.7;">(Away)</small>
                                    <strong>${result.awayTeam}</strong>
                                    ${getTeamLogo(result.division, result.awayTeam)}
                                </div>
                            </div>
                            <div class="match-result">
                                <span class="${winnerClass}"><i class="fas fa-trophy"></i> ${winnerText}</span>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        async function removeResult(resultId) {
            if (!confirm('Are you sure you want to remove this match result? This will revert it to a scheduled fixture.')) {
                return;
            }
            try {
                await db.collection("fixtures").doc(resultId).update({
                    played: false,
                    homeScore: firebase.firestore.FieldValue.delete(),
                    awayScore: firebase.firestore.FieldValue.delete(),
                    forfeit: firebase.firestore.FieldValue.delete(),
                    forfeitTeam: firebase.firestore.FieldValue.delete()
                });
                alert('Match result removed successfully!');
            } catch (error) {
                console.error("Error removing result:", error);
                alert('Error removing result. Please try again.');
            }
        }
        function renderAdminResults() {
            const container = document.getElementById('admin-results-list');
            const selectedDivision = document.getElementById('admin-results-division-filter').value;
            if (!appData.results || appData.results.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">No results loaded yet.</p>';
                return;
            }
            let results = appData.results.filter(r => r.played);
            if (selectedDivision !== 'all') {
                results = results.filter(r => r.division === selectedDivision);
            }
            results.sort((a, b) => new Date(b.date) - new Date(a.date));
            let html = '<h4><i class="fas fa-clipboard-list"></i> Recorded Results:</h4>';
            if (results.length === 0) {
                html += '<p style="text-align: center; opacity: 0.7;">No results recorded for this division.</p>';
            } else {
                results.forEach(result => {
                    let resultText;
                    if (result.forfeit) {
                        const forfeitingTeam = result.forfeitTeam === 'home' ? result.homeTeam : result.awayTeam;
                        resultText = `FORFEIT by ${forfeitingTeam}`;
                    } else {
                        resultText = `${result.homeScore} - ${result.awayScore}`;
                    }
                    html += `
                        <div class="card" style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem;">
                                <div style="flex: 1;">
                                    <strong><i class="fas fa-medal"></i> ${getDivisionName(result.division)}</strong><br>
                                    <span>${result.homeTeam} vs ${result.awayTeam}</span><br>
                                    <small><i class="fas fa-calendar-alt"></i> ${result.date}</small><br>
                                    <span><strong>Result:</strong> ${resultText}</span>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                    <button class="btn btn-danger" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="removeResult('${result.id}')">
                                        <i class="fas fa-trash"></i> Remove Result
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        // Settings Functions
        async function uploadMainLogo() {
            const logoData = currentImageData['main-logo-upload'];
            if (!logoData) {
                alert('Please select a logo first');
                return;
            }
            try {
                await db.collection("settings").doc("mainLogo").set({
                    data: logoData,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                updateMainLogo(logoData);
                alert('Main logo updated successfully!');
            } catch (error) {
                console.error("Error uploading main logo:", error);
                alert('Error uploading logo. Please try again.');
            }
        }
        async function uploadCoverPhoto() {
            const coverData = currentImageData['cover-photo-upload'];
            if (!coverData) {
                alert('Please select a cover photo first');
                return;
            }
            try {
                await db.collection("settings").doc("coverPhoto").set({
                    data: coverData,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                updateCoverPhoto(coverData);
                alert('Cover photo updated successfully!');
            } catch (error) {
                console.error("Error uploading cover photo:", error);
                alert('Error uploading cover photo. Please try again.');
            }
        }
        // Team Details & Standings
        function showDivisionStandings(division) {
            const teams = appData.teams[division].map(team => team.name);
            const divisionResults = appData.results.filter(r => r.division === division && r.played);
            const standings = teams.map(teamName => {
                const teamResults = divisionResults.filter(result => 
                    result.homeTeam === teamName || result.awayTeam === teamName
                );
                let wins = 0, losses = 0, forfeits = 0, pointsFor = 0, pointsAgainst = 0;
                teamResults.forEach(result => {
                    const isHome = result.homeTeam === teamName;
                    const teamScore = isHome ? result.homeScore : result.awayScore;
                    const opponentScore = isHome ? result.awayScore : result.homeScore;
                    pointsFor += teamScore;
                    pointsAgainst += opponentScore;
                    if (result.forfeit) {
                        if ((isHome && result.forfeitTeam === 'home') || (!isHome && result.forfeitTeam === 'away')) {
                            forfeits++;
                        } else {
                            wins++;
                        }
                    } else {
                        if (teamScore > opponentScore) {
                            wins++;
                        } else {
                            losses++;
                        }
                    }
                });
                const totalPoints = (wins * 2) + (losses * 1) + (forfeits * 0);
                return {
                    team: teamName,
                    played: teamResults.length,
                    wins,
                    losses,
                    forfeits,
                    pointsFor,
                    pointsAgainst,
                    pointsDiff: pointsFor - pointsAgainst,
                    points: totalPoints
                };
            });
            standings.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                if (b.pointsDiff !== a.pointsDiff) return b.pointsDiff - a.pointsDiff;
                return b.pointsFor - a.pointsFor;
            });
            let html = `
                <h2><i class="fas fa-chart-line"></i> ${getDivisionName(division)} - Standings</h2>
                <p style="margin-bottom: 2rem; text-align: center; opacity: 0.8;">
                    <strong>Point System:</strong> 2 points for Win, 1 point for Loss, 0 points for Forfeit
                </p>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Pos</th>
                                <th>Team</th>
                                <th>P</th>
                                <th>W</th>
                                <th>L</th>
                                <th>F</th>
                                <th>PF</th>
                                <th>PA</th>
                                <th>PD</th>
                                <th>Pts</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            standings.forEach((team, index) => {
                html += `
                    <tr onclick="showTeamDetails('${division}', '${team.team}')" style="cursor: pointer;">
                        <td><strong>${index + 1}</strong></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                ${getTeamLogo(division, team.team)}
                                <span>${team.team}</span>
                            </div>
                        </td>
                        <td>${team.played}</td>
                        <td class="status-win">${team.wins}</td>
                        <td class="status-loss">${team.losses}</td>
                        <td class="status-forfeit">${team.forfeits}</td>
                        <td>${team.pointsFor}</td>
                        <td>${team.pointsAgainst}</td>
                        <td class="${team.pointsDiff >= 0 ? 'status-win' : 'status-loss'}">${team.pointsDiff >= 0 ? '+' : ''}${team.pointsDiff}</td>
                        <td style="font-weight: bold; color: var(--accent-color);">${team.points}</td>
                    </tr>
                `;
            });
            html += `
                        </tbody>
                    </table>
                </div>
                <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.7;">
                    <em>P=Played, W=Won, L=Lost, F=Forfeited, PF=Points For, PA=Points Against, PD=Point Difference, Pts=League Points</em>
                </p>
            `;
            document.getElementById('modal-title').innerHTML = `<i class="fas fa-chart-line"></i> Standings`;
            document.getElementById('modal-body').innerHTML = html;
            document.getElementById('modal').style.display = 'block';
        }
        async function showTeamDetails(division, teamName) {
            const resultsSnapshot = await db.collection("fixtures")
                .where("played", "==", true)
                .where("division", "==", division)
                .get();
            const teamResults = resultsSnapshot.docs
                .filter(doc => {
                    const result = doc.data();
                    return result.homeTeam === teamName || result.awayTeam === teamName;
                })
                .map(doc => doc.data());
            let wins = 0, losses = 0, forfeits = 0, totalPointsScored = 0, totalPointsConceded = 0;
            teamResults.forEach(result => {
                const isHome = result.homeTeam === teamName;
                const teamScore = isHome ? result.homeScore : result.awayScore;
                const opponentScore = isHome ? result.awayScore : result.homeScore;
                totalPointsScored += teamScore;
                totalPointsConceded += opponentScore;
                if (result.forfeit) {
                    if ((isHome && result.forfeitTeam === 'home') || (!isHome && result.forfeitTeam === 'away')) {
                        forfeits++;
                    } else {
                        wins++;
                    }
                } else {
                    if (teamScore > opponentScore) {
                        wins++;
                    } else {
                        losses++;
                    }
                }
            });
            const totalLeaguePoints = (wins * 2) + (losses * 1) + (forfeits * 0);
            const avgPointsScored = teamResults.length > 0 ? (totalPointsScored / teamResults.length).toFixed(1) : 0;
            const avgPointsConceded = teamResults.length > 0 ? (totalPointsConceded / teamResults.length).toFixed(1) : 0;
            const winRate = teamResults.length > 0 ? ((wins/teamResults.length) * 100).toFixed(1) : 0;
            const logoSrc = appData.settings.teamLogos[`${division}-${teamName}`];
            const teamLogo = logoSrc ? 
                `<div class="team-logo" style="margin: 0 auto 2rem;"><img src="${logoSrc}" alt="${teamName}"></div>` :
                `<div class="team-logo" style="margin: 0 auto 2rem;">${teamName.charAt(0)}</div>`;
            let html = `
                <div style="text-align: center;">
                    ${teamLogo}
                    <h2>${teamName}</h2>
                    <p style="opacity: 0.8; margin-bottom: 2rem;"><strong>Division:</strong> ${getDivisionName(division)}</p>
                </div>
                <div class="table-container">
                    <h3 style="margin-bottom: 1rem;"><i class="fas fa-chart-line"></i> Season Statistics</h3>
                    <table class="table">
                        <tr><td><strong>Games Played</strong></td><td>${teamResults.length}</td></tr>
                        <tr><td><strong>Wins</strong></td><td class="status-win">${wins}</td></tr>
                        <tr><td><strong>Losses</strong></td><td class="status-loss">${losses}</td></tr>
                        <tr><td><strong>Forfeits</strong></td><td class="status-forfeit">${forfeits}</td></tr>
                        <tr><td><strong>Total Points Scored</strong></td><td>${totalPointsScored}</td></tr>
                        <tr><td><strong>Total Points Conceded</strong></td><td>${totalPointsConceded}</td></tr>
                        <tr><td><strong>Average Points Scored</strong></td><td>${avgPointsScored}</td></tr>
                        <tr><td><strong>Average Points Conceded</strong></td><td>${avgPointsConceded}</td></tr>
                        <tr><td><strong>League Points</strong></td><td style="font-weight: bold; color: var(--accent-color);">${totalLeaguePoints}</td></tr>
                        <tr><td><strong>Win Rate</strong></td><td>${winRate}%</td></tr>
                    </table>
                </div>
            `;
            document.getElementById('modal-title').innerHTML = `<i class="fas fa-user"></i> Team Details`;
            document.getElementById('modal-body').innerHTML = html;
            document.getElementById('modal').style.display = 'block';
        }
        // Home Page Functions
        function loadHomeData() {
            updateQuickStats();
            renderHomeNewsPreview();
        }
        function updateQuickStats() {
            let totalTeams = 0;
            Object.keys(appData.teams).forEach(division => {
                totalTeams += appData.teams[division].length;
            });
            const totalGames = appData.results.length;
            const totalFixtures = appData.fixtures.length;
            document.getElementById('total-teams').textContent = totalTeams;
            document.getElementById('total-games').textContent = totalGames;
            document.getElementById('total-fixtures').textContent = totalFixtures;
        }
        function renderHomeNewsPreview() {
            const container = document.getElementById('home-news-grid');
            const latestNews = appData.news.slice(0, 3);
            let html = '';
            if (latestNews.length === 0) {
                html = '<div class="loading"><p>No news articles yet.</p></div>';
            } else {
                latestNews.forEach(article => {
                    html += `
                        <div class="card news-card" onclick="showNewsDetails('${article.id}')">
                            <div class="news-image">
                                ${article.image ? `<img src="${article.image}" alt="${article.title}">` : '<i class="fas fa-newspaper" style="font-size: 3rem; opacity: 0.3;"></i>'}
                            </div>
                            <div class="news-meta">
                                <i class="fas fa-calendar-alt"></i> ${article.date || 'No date'}
                            </div>
                            <h3>${article.title}</h3>
                            <div class="news-excerpt">
                                ${article.content.substring(0, 100)}${article.content.length > 100 ? '...' : ''}
                            </div>
                            <div style="color: var(--accent-color); font-weight: bold;">
                                Read More <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }
        // Admin Functions
        function adminAccess() {
            adminClickCount++;
            document.getElementById('click-counter').textContent = `Clicks: ${adminClickCount}/5`;
            document.getElementById('admin-access').style.display = 'block';
            if (adminClickCount >= 5) {
                document.body.classList.add('admin-mode');
                document.getElementById('admin-access').style.display = 'none';
                alert('Admin mode activated!');
                adminClickCount = 0;
            }
            setTimeout(() => {
                document.getElementById('admin-access').style.display = 'none';
            }, 2000);
        }
        function toggleAdmin() {
            const panel = document.getElementById('admin-panel');
            panel.classList.toggle('show');
        }
        function showAdminTab(tabName) {
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            document.querySelectorAll('.admin-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`admin-${tabName}`).classList.add('active');
            if (tabName === 'fixtures') {
                updateFixtureTeams();
                renderAdminFixtures();
            } else if (tabName === 'matches') {
                updateMatchTeams();
            } else if (tabName === 'news') {
                renderAdminNews();
            } else if (tabName === 'results') {
                setTimeout(() => {
                    renderAdminResults();
                }, 500);
            }
        }
        // Utility Functions
        function getDivisionName(division) {
            const names = {
                'first': 'First Division',
                'second': 'Second Division',
                'female': 'Female Division',
                'third-jj': 'Third Division - JJ Roberts',
                'third-ej': 'Third Division - EJ Roye'
            };
            return names[division] || division;
        }
        function getTeamLogo(division, teamName) {
            const logoKey = `${division}-${teamName}`;
            const logoSrc = appData.settings.teamLogos[logoKey];
            if (logoSrc) {
                return `<div class="team-logo-small"><img src="${logoSrc}" alt="${teamName}"></div>`;
            } else {
                return `<div class="team-logo-small">${teamName.charAt(0)}</div>`;
            }
        }
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
        // Error Handling
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
        });
    </script>
</body>
</html>
